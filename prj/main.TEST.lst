gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  1


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

                      00001         include "p18f1320.inc" ;include the defaults for the chip
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Oct 21 2015
                      00005 ;  MPASM PIC18F1320 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2015 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00991         LIST
                      00002         include "bp.inc"
                      00001 #define BIT_BP_STATUS_TIMEOUT 0;
                      00002 #define BIT_CALIBRATION_P  2 ;RA2
                      00003 #define BIT_CALIBRATION_M  3 ;RA3
                      00004 #define BIT_BANDE 4 ;RA4
                      00005 #define BP_PORT PORTA
                      00006 #define BP_CALIBRATION_P  BP_PORT,BIT_CALIBRATION_P
                      00007 #define BP_CALIBRATION_M  BP_PORT,BIT_CALIBRATION_M
                      00008 #define BP_BANDE BP_PORT,4
                      00003         include "log.inc"
                      00001 #define NB_BYTE D'08'
                      00002 #define TIMER0_START (1<<TMR0ON) | (1<<T08BIT) | (1<<PSA)
                      00003 
                      00004 #define TAG_TIMER 0x40
                      00005 #define TAG_PIC_REG 0x20
                      00006 #define TAG_FW_VERSION 0x10
                      00007 
                      00008 m_timer0_start  macro
                      00009   CLRF  T0CON
                      00010   CLRF  TMR0L
                      00011   MOVLW TIMER0_START
                      00012   MOVWF T0CON
                      00013         endm
                      00014 
                      00015 
                      00016 
                      00017 m_timer0_stop   macro
                      00018   MOVFF TMR0L,v_log_data+1
                      00019   MOVFF TMR0H,v_log_data
                      00020   clrf T0CON
                      00021   movlw 0x05
                      00022   subwf v_log_data+1,f
                      00023   endm
                      00004         include "calc.inc"
                      00001 #define PORT_BIT 0
                      00002 
                      00003 #define N_MAX D'4'
                      00004 #define N_MIN D'0'
                      00005 
                      00006 #define PAS_0_MSB 0x00
                      00007 #define PAS_0_LSB 0x00
                      00008 #define PAS_0_5_MSB 0x01
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  2


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

                      00009 #define PAS_0_5_LSB 0xF4
                      00010 #define PAS_0_25_MSB 0x00
                      00011 #define PAS_0_25_LSB 0xFA
                      00012 #define PAS_0_125_MSB 0x00
                      00013 #define PAS_0_125_LSB 0x7D
                      00014 #define PAS_0_0625_MSB 0x02
                      00015 #define PAS_0_0625_LSB 0x71
                      00005 
                      00006         ERRORLEVEL 0, -302 ;suppress bank selection messages
                      00007 
                      00008         config OSC = INTIO2 ; Internal Oscillator with FOSC/4 -RA6 and RA7 = I/O
                      00009         config FSCM = OFF ; Fail-Safe Clock Monitor disabled
                      00010         config IESO = OFF ; Internal External Switch Over mode disabled
                      00011         config PWRT = OFF ; Power up timer disabled
                      00012         config BOR = OFF ; Brown out reset disabled
                      00013         config WDT = OFF ; Watch dog timer off
                      00014         config MCLRE = OFF ; MCLRE off (pin available for input)
                      00015         config LVP = OFF ; Low voltage programming disabled
                      00016         config DEBUG = OFF ; Background debugger off    CONFIG  _CONFIG2L, _PWRT_ON_2L & _BOR_OFF_2L & _
                            BORV_27_2L
                      00017 
  0000                00018         extern f_lcd_init
  0000                00019         extern f_i2c_init
  0000                00020         extern f_lcd_affboot
  0000                00021         extern f_lcd_clear
  0000                00022         extern f_lcd_setposcursor
  0000                00023         extern f_adc_init
  0000                00024         extern f_adc_read_fwd
  0000                00025         extern f_adc_read_ref
  0000                00026         extern f_aop_set_rdac_fwd
  0000                00027         extern f_aop_set_rdac_ref
  0000                00028         extern f_bp_init
  0000                00029         extern f_bp_test_bande
  0000                00030         extern f_bp_test_calm
  0000                00031         extern f_bp_test_calp
  0000                00032         extern delay_250ms
  0000                00033         extern v_bp_status
  0000                00034         extern v_log_data
  0000                00035         extern v_log_data_size
  0000                00036         extern v_log_tag
  0000                00037         extern f_log_write
  0000                00038         extern f_eep_readbyte
                      00039 IFDEF TEST
  0000                00040         extern f_lcd_aff_fwd_and_ref
  0000                00041         extern f_lcd_aff_G_and_rdac
  0000                00042         extern f_lcd_aff_n
  0000                00043         extern f_lcd_aff_adc_hexa
  0000                00044         extern f_calc_vadc_fwd_and_ref
  0000                00045         extern f_lcd_aff_adc_mV
  0000                00046         extern f_calc_init
  0000                00047         extern f_lcd_toggle_fwd_port
  0000                00048         extern f_lcd_toggle_ref_port
  0000                00049         extern v_calc_port
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  3


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

  0000                00050         extern v_calc_n_ref
  0000                00051         extern v_calc_n_fwd
  0000                00052         extern f_lcd_toggle_n_ref
  0000                00053         extern f_lcd_toggle_n_fwd
  0000                00054         extern f_calc_set_n_min_fwd
  0000                00055         extern f_calc_set_n_max_fwd
  0000                00056         extern f_calc_set_n_min_ref
  0000                00057         extern f_calc_set_n_max_ref
  0000                00058         extern Del_11us ;pour trace timer 0 uniquement
  0000                00059         extern f_lcd_aff_rdac
  0000                00060         extern f_aop_get_rdac_fwd
  0000                00061         extern f_aop_get_rdac_ref
  0000                00062         extern f_aop_set_rdac_eep_fwd
  0000                00063         extern f_aop_set_rdac_eep_ref
  0000                00064         extern v_aop_rdac
  0000                00065         extern f_lcd_toggle_rdac_fwd
  0000                00066         extern f_lcd_toggle_rdac_ref
  0000                00067         extern f_calc_get_eep_value
  0000                00068         extern f_calc_partie_entiere
                      00069         ;extern f_calc_position_virgule
  0000                00070         extern f_calc_partie_decimale
  0000                00071         extern f_lcd_calibrated_voltage
  0000                00072         extern D160us ;pour trace timer 0 uniquement
                      00073 ENDIF
                      00074 
                      00075         udata
                      00076 
                      00077 IFDEF TEST
000000                00078 v_menu res 1
000001                00079 v_tmp res 2
                      00080 ENDIF
000003                00081 v_test res 16
                      00082 
                      00083         code
000000 EF?? F0??      00084         goto Init ;
                      00085 
000004                00086 Init
                      00087 ; Initialisation PIC
000004 0E62           00088         movlw   B'01100010'                     ;4 MHz
000006 6ED3           00089         movwf   OSCCON
000008 6AF2           00090         clrf    INTCON              ;disable all interrupts part one
00000A 0E80           00091         movlw   B'10000000'         ;disable all interrupts part two &
00000C 6EF1           00092         movwf   INTCON2             ;PORTB pull-up disable
00000E 6AF0           00093         clrf    INTCON3             ;disable all interrupts part three
000010 6A9F           00094         clrf    IPR1                ;clear, no priority is used
000012 6AA2           00095         clrf    IPR2                ;clear, no priority is used
000014 6A9D           00096         clrf    PIE1                ;Individualy disable interrupts
000016 6AA0           00097         clrf    PIE2                ;Individualy disable interrupts
000018 9ED0           00098         bcf     RCON,IPEN           ;Disable priority levels
00001A 6AA6           00099         clrf    EECON1              ;clear EEPROM control register
00001C 90D1           00100         bcf             WDTCON,SWDTEN           ;stop watchdog
00001E 6ABD           00101         clrf   CCP1CON
000020 6AC2           00102   clrf ADCON0
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  4


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

000022 0E7F           00103         movlw B'01111111'       ;digital input on PORTA
000024 6EC1           00104         movwf ADCON1
000026 6AC0           00105         clrf ADCON2
                      00106 
000028 0E1C           00107         movlw b'00011100' ; RA2/3/4 input
00002A 6E92           00108         movwf TRISA ;
00002C 6A80           00109         clrf PORTA
00002E 0E00           00110         movlw b'00000000' ; PortB Outputs
000030 6E93           00111         movwf TRISB ; Change PortB I/O
000032 6A81           00112         clrf PORTB
                      00113 
                      00114 ; Initialize the LCD Display
000034 EC?? F0??      00115         call f_lcd_init
                      00116 ; Afficher le message de boot
000038 EC?? F0??      00117         call f_lcd_affboot
                      00118 ;; Tempo de 3s
00003C EC?? F0??      00119         call f_tempo_boot
                      00120 
                      00121 
                      00122 IFDEF TEST
000040 0E54           00123         movlw 'T'
000042 6E??           00124         movwf v_log_data
000044 0E45           00125         movlw 'E'
000046 6E??           00126         movwf v_log_data+1
000048 0E53           00127         movlw 'S'
00004A 6E??           00128         movwf v_log_data+2
                      00129 ENDIF
                      00130 
00004C 0E00           00131         movlw 0x00
00004E EC?? F0??      00132         call f_eep_readbyte
000052 6E??           00133         movwf v_log_data+3
000054 0E01           00134         movlw 0x01
000056 EC?? F0??      00135         call f_eep_readbyte
00005A 6E??           00136         movwf v_log_data+4
00005C 0E02           00137         movlw 0x02
00005E EC?? F0??      00138         call f_eep_readbyte
000062 6E??           00139         movwf v_log_data+5
000064 0E03           00140         movlw 0x03
000066 EC?? F0??      00141         call f_eep_readbyte
00006A 6E??           00142         movwf v_log_data+6
                      00143 
00006C 0E10           00144         movlw TAG_FW_VERSION
00006E 6E??           00145         movwf v_log_tag
000070 0E08           00146         movlw D'08'
000072 6E??           00147         movwf v_log_data_size
000074 EC?? F0??      00148         call f_log_write
                      00149 
                      00150 
                      00151 ;Trace le contenu de RCON au démarrage
000078 CFD0 F000      00152         movff RCON,v_log_data
00007C CFFC F000      00153         movff STKPTR,v_log_data+1
000080 0E20           00154         movlw TAG_PIC_REG
000082 6E??           00155         movwf v_log_tag
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  5


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

000084 0E02           00156         movlw D'02'
000086 6E??           00157         movwf v_log_data_size
000088 EC?? F0??      00158         call f_log_write
                      00159 
                      00160 IFDEF TEST
                      00161 ;trace timer 0 pour calibration
                      00162         m_timer0_start
00008C 6AD5               M   CLRF  T0CON
00008E 6AD6               M   CLRF  TMR0L
000090 0EC8               M   MOVLW (1<<TMR0ON) | (1<<T08BIT) | (1<<PSA)
000092 6ED5               M   MOVWF T0CON
000094 EC?? F0??      00163         call Del_11us
                      00164         m_timer0_stop
000098 CFD6 F000          M   MOVFF TMR0L,v_log_data+1
00009C CFD7 F000          M   MOVFF TMR0H,v_log_data
0000A0 6AD5               M   clrf T0CON
0000A2 0E05               M   movlw 0x05
0000A4 5E??               M   subwf v_log_data+1,f
                      00165 
0000A6 0E40           00166         movlw TAG_TIMER
0000A8 6E??           00167         movwf v_log_tag
0000AA 0E02           00168         movlw D'02'
0000AC 6E??           00169         movwf v_log_data_size
0000AE EC?? F0??      00170         call f_log_write
                      00171 
                      00172         m_timer0_start
0000B2 6AD5               M   CLRF  T0CON
0000B4 6AD6               M   CLRF  TMR0L
0000B6 0EC8               M   MOVLW (1<<TMR0ON) | (1<<T08BIT) | (1<<PSA)
0000B8 6ED5               M   MOVWF T0CON
0000BA EC?? F0??      00173         call D160us
                      00174         m_timer0_stop
0000BE CFD6 F000          M   MOVFF TMR0L,v_log_data+1
0000C2 CFD7 F000          M   MOVFF TMR0H,v_log_data
0000C6 6AD5               M   clrf T0CON
0000C8 0E05               M   movlw 0x05
0000CA 5E??               M   subwf v_log_data+1,f
                      00175 
0000CC 0E40           00176         movlw TAG_TIMER
0000CE 6E??           00177         movwf v_log_tag
0000D0 0E02           00178         movlw D'02'
0000D2 6E??           00179         movwf v_log_data_size
0000D4 EC?? F0??      00180         call f_log_write
                      00181 
                      00182 ENDIF
                      00183 
                      00184 
                      00185         ;Initialisation des composants logiciels
0000D8 EC?? F0??      00186         call f_i2c_init
0000DC EC?? F0??      00187         call f_adc_init         ;
0000E0 EC?? F0??      00188         call f_calc_init
0000E4 EC?? F0??      00189         call f_bp_init
                      00190 ;; Effacer le LCD (lcd_clear)
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  6


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

0000E8 EC?? F0??      00191         call f_lcd_clear
                      00192 
                      00193 IFDEF DEBUG_ISSUE_134
                      00194         ;Fiche #121 #157 #134
                      00195         ;appelle l'init des composants branchés sur le bus i2c
                      00196         ;pour contourner le NACK reçu uniquement lors de la 1ère trame sous GPSIM
0000EC EC?? F0??      00197         call f_aop_set_rdac_fwd
0000F0 EC?? F0??      00198         call f_aop_set_rdac_ref
0000F4 EC?? F0??      00199         call f_adc_read_fwd
                      00200 ENDIF
                      00201 
                      00202 
                      00203 IFDEF TEST
0000F8 6A??           00204         clrf v_menu ; menu mesure par défaut au démarrage
                      00205 
0000FA                00206 test_loop
                      00207 
                      00208         ;;Appui sur le bouton bande ?
                      00209 
0000FA 6A??           00210         clrf v_bp_status
0000FC EC?? F0??      00211         call f_bp_test_bande
000100 A8??           00212         btfss v_bp_status,BIT_BANDE
000102 EF?? F0??      00213         goto choix_menu
                      00214 
000106 2A??           00215         incf v_menu,f
                      00216         ;; Effacer le LCD (lcd_clear)
000108 EC?? F0??      00217         call f_lcd_clear
                      00218 
                      00219 
00010C                00220 choix_menu
                      00221 
00010C 50??           00222         movf    v_menu,w
00010E 0A00           00223         xorlw   D'0'
000110 B4D8           00224         btfsc   STATUS,Z
000112 EF?? F0??      00225         goto    menu_mesure
000116 50??           00226         movf    v_menu,w
000118 0A01           00227         xorlw   D'1'
00011A B4D8           00228         btfsc   STATUS,Z
00011C EF?? F0??      00229         goto    menu_calibration
000120 50??           00230         movf    v_menu,w
000122 0A02           00231         xorlw   D'2'
000124 B4D8           00232         btfsc   STATUS,Z
000126 EF?? F0??      00233         goto    menu_calcul
00012A 50??           00234         movf    v_menu,w
00012C 0A03           00235         xorlw   D'3'
00012E B4D8           00236         btfsc   STATUS,Z
000130 6A??           00237         clrf v_menu
000132 EF?? F0??      00238         goto test_loop
                      00239 
000136                00240 menu_mesure
000136 6A??           00241         clrf v_menu
                      00242 
                      00243         ;fixe Rdac
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  7


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

000138 EC?? F0??      00244         call f_aop_set_rdac_fwd
00013C EC?? F0??      00245         call f_aop_set_rdac_ref
                      00246 
                      00247                 ;;lire les registres ADCfwd et ADCref
000140 EC?? F0??      00248         call f_adc_read_fwd
000144 EC?? F0??      00249         call f_adc_read_ref
                      00250 
                      00251         ;; Convertir la mesure des ADC en hexa (rien à faire) et en mV
000148 EC?? F0??      00252         call f_calc_vadc_fwd_and_ref
                      00253 
                      00254         ;Affiche "FWD et REF" sur les 1ères et 2èmes lignes
00014C EC?? F0??      00255         call f_lcd_aff_fwd_and_ref
                      00256 
                      00257         ;; afficher la mesure des ADC en hexadécimal
000150 EC?? F0??      00258         call f_lcd_aff_adc_hexa
                      00259         ;; afficher la mesure des ADC en mV
000154 EC?? F0??      00260         call f_lcd_aff_adc_mV
                      00261 
000158 EF?? F0??      00262         goto test_loop
                      00263 
                      00264 
00015C                00265 menu_calibration
00015C 6A??           00266         clrf v_menu
00015E 80??           00267         bsf v_menu,0
                      00268 
000160                00269 _menu_cal_toggle_port
                      00270         ;Affiche "FWD et REF" sur les 1ères et 2èmes lignes
000160 EC?? F0??      00271         call f_lcd_aff_fwd_and_ref
000164 0E04           00272         movlw 0x04
000166 EC?? F0??      00273         call f_lcd_setposcursor
00016A EC?? F0??      00274         call f_lcd_aff_G_and_rdac
00016E 0E14           00275         movlw 0x14
000170 EC?? F0??      00276         call f_lcd_setposcursor
000174 EC?? F0??      00277         call f_lcd_aff_G_and_rdac
000178 EC?? F0??      00278         call f_lcd_aff_n
00017C EC?? F0??      00279         call f_lcd_aff_rdac
                      00280 
                      00281 
000180 B0??           00282         btfsc v_calc_port,PORT_BIT
000182 EF?? F0??      00283         goto _menu_cal_toggle_fwd_port
000186 EC?? F0??      00284         call f_lcd_toggle_ref_port
00018A A0??           00285         btfss v_calc_port,PORT_BIT
00018C EF?? F0??      00286         goto _menu_cal_toggle_n_value;1=>valeur non modifié. On est sortie de la FSM par un appui sur B
                            P_BANDE
000190 EF?? F0??      00287         goto _menu_cal_toggle_port;0=>valeur modifié. Il faut recommencer le même clignotement !!!
000194                00288 _menu_cal_toggle_fwd_port
000194 EC?? F0??      00289         call f_lcd_toggle_fwd_port
000198 B0??           00290         btfsc v_calc_port,PORT_BIT
00019A EF?? F0??      00291         goto _menu_cal_toggle_n_value;1=>valeur non modifié. On est sortie de la FSM par un appui sur B
                            P_BANDE
00019E EF?? F0??      00292         goto _menu_cal_toggle_port;0=>valeur modifié. Il faut recommencer le même clignotement !!!
                      00293 
0001A2                00294 _menu_cal_toggle_n_value ;faire clignoter la valeur de n
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  8


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

0001A2 B0??           00295         btfsc v_calc_port,PORT_BIT
0001A4 EF?? F0??      00296         goto _menu_cal_toggle_n_fwd
0001A8 C??? F???      00297         movff v_calc_n_ref,v_tmp
0001AC EC?? F0??      00298         call f_lcd_toggle_n_ref
0001B0                00299 _check_n_ref_min
0001B0 0EFF           00300         movlw N_MIN-1
0001B2 62??           00301         cpfseq v_calc_n_ref
0001B4 EF?? F0??      00302   goto _check_n_ref_max
0001B8 EC?? F0??      00303         call _set_n_min_ref
0001BC                00304 _check_n_ref_max
0001BC 0E05           00305         movlw N_MAX+1
0001BE 62??           00306         cpfseq v_calc_n_ref
0001C0 EF?? F0??      00307         goto _check_n_ref_change
0001C4 EC?? F0??      00308         call _set_n_max_ref
0001C8                00309 _check_n_ref_change
0001C8 50??           00310         movf v_calc_n_ref,w
0001CA 62??           00311   cpfseq v_tmp
0001CC EF?? F0??      00312         goto _menu_cal_toggle_n_value;valeur "!=". Il faut recommencer le même clignotement !!!
0001D0 EF?? F0??      00313         goto _menu_cal_toggle_rdac;valeurs "="= =>valeur non modifié. On est sortie de la FSM par un ap
                            pui sur BP_BANDE
0001D4                00314 _menu_cal_toggle_n_fwd
0001D4 C??? F???      00315         movff v_calc_n_fwd,v_tmp
0001D8 EC?? F0??      00316         call f_lcd_toggle_n_fwd
0001DC                00317 _check_n_fwd_min
0001DC 0EFF           00318         movlw N_MIN-1
0001DE 62??           00319         cpfseq v_calc_n_fwd
0001E0 EF?? F0??      00320   goto _check_n_fwd_max
0001E4 EC?? F0??      00321         call _set_n_min_fwd
0001E8                00322 _check_n_fwd_max
0001E8 0E05           00323         movlw N_MAX+1
0001EA 62??           00324         cpfseq v_calc_n_fwd
0001EC EF?? F0??      00325         goto _check_n_fwd_change
0001F0 EC?? F0??      00326         call _set_n_max_fwd
0001F4                00327 _check_n_fwd_change
0001F4 50??           00328         movf v_calc_n_fwd,w
0001F6 62??           00329         cpfseq v_tmp
0001F8 EF?? F0??      00330         goto _menu_cal_toggle_n_value;valeur "!=". Il faut recommencer le même clignotement !!!
0001FC EF?? F0??      00331         goto _menu_cal_toggle_rdac;valeurs "="= =>valeur non modifié. On est sortie de la FSM par un ap
                            pui sur BP_BANDE
                      00332 
                      00333 
000200                00334 _menu_cal_toggle_rdac
000200 EC?? F0??      00335  call f_lcd_aff_rdac
000204 B0??           00336  btfsc v_calc_port,PORT_BIT
000206 EF?? F0??      00337  goto _menu_cal_toggle_rdac2
00020A EC?? F0??      00338  call f_aop_get_rdac_ref
00020E EF?? F0??      00339  goto _menu_cal_toggle_rdac3
000212                00340 _menu_cal_toggle_rdac2
000212 EC?? F0??      00341  call f_aop_get_rdac_fwd
000216                00342 _menu_cal_toggle_rdac3
000216 B0??           00343  btfsc v_calc_port,PORT_BIT
000218 EF?? F0??      00344  goto _menu_cal_toggle_rdac_fwd
00021C C??? F???      00345  movff v_aop_rdac+1,v_tmp
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE  9


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

000220 EC?? F0??      00346  call f_lcd_toggle_rdac_ref
000224                00347 _check_rdac_ref_change
000224 50??           00348  movf v_aop_rdac+1,w
000226 62??           00349  cpfseq v_tmp
000228 EF?? F0??      00350  goto _menu_cal_toggle_rdac3;valeur "!=". Il faut recommencer le même clignotement !!!
00022C EF?? F0??      00351  goto _menu_cal_end
                      00352 
000230                00353 _menu_cal_toggle_rdac_fwd
000230 C??? F???      00354  movff v_aop_rdac+1,v_tmp
000234 EC?? F0??      00355  call f_lcd_toggle_rdac_fwd
000238                00356 _check_rdac_fwd_change
000238 50??           00357  movf v_aop_rdac+1,w
00023A 62??           00358  cpfseq v_tmp
00023C EF?? F0??      00359  goto _menu_cal_toggle_rdac3;valeur "!=". Il faut recommencer le même clignotement !!!
                      00360  ;      goto _menu_cal_end
                      00361 
000240                00362 _menu_cal_end
                      00363         ;on est sorti de la FSM toggle
000240 B0??           00364         btfsc v_calc_port,PORT_BIT
000242 EF?? F0??      00365   goto _menu_cal_end2
000246 EC?? F0??      00366   call f_aop_set_rdac_eep_ref
00024A EF?? F0??      00367   goto _menu_cal_end3
00024E                00368 _menu_cal_end2
00024E EC?? F0??      00369   call f_aop_set_rdac_eep_fwd
000252                00370 _menu_cal_end3
000252 2A??           00371         incf v_menu,f
000254 EC?? F0??      00372         call f_lcd_clear
000258 EF?? F0??      00373         goto choix_menu
                      00374 
00025C                00375 menu_calcul
                      00376 
                      00377         ;fixe Rdac
00025C EC?? F0??      00378         call f_aop_set_rdac_fwd
000260 EC?? F0??      00379         call f_aop_set_rdac_ref
                      00380 
                      00381         ;lire les registres ADCfwd et ADCref
000264 EC?? F0??      00382         call f_adc_read_fwd
000268 EC?? F0??      00383         call f_adc_read_ref
                      00384 
                      00385         ;Affiche "FWD et REF" sur les 1ères et 2èmes lignes
00026C EC?? F0??      00386         call f_lcd_aff_fwd_and_ref
                      00387 
                      00388         ;calcul des tensions calibrées
000270 EC?? F0??      00389         call f_calc_get_eep_value
000274 EC?? F0??      00390         call f_calc_partie_entiere
000278 EC?? F0??      00391         call f_calc_partie_decimale
                      00392 
00027C EC?? F0??      00393         call f_lcd_calibrated_voltage
                      00394 
000280 EF?? F0??      00395         goto test_loop
                      00396 
                      00397 
                      00398 ENDIF
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 10


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

                      00399 
                      00400 
                      00401 ;-----------------------------------------
                      00402 ;Fonction : temporisation de 3s
                      00403 ;Nom : tempo_boot
                      00404 ;Entrée :
                      00405 ;Sortie :
                      00406 ;Traitement :
                      00407 ;               1.      appeler 12x une temporisation de 250ms
                      00408 ;-----------------------------------------
                      00409 
000284                00410 f_tempo_boot
000284 EC?? F0??      00411         call delay_250ms
000288 EC?? F0??      00412         call delay_250ms
00028C EC?? F0??      00413         call delay_250ms
000290 EC?? F0??      00414         call delay_250ms
000294 EC?? F0??      00415         call delay_250ms
000298 EC?? F0??      00416         call delay_250ms
00029C EC?? F0??      00417         call delay_250ms
0002A0 EC?? F0??      00418         call delay_250ms
0002A4 0012           00419         return
                      00420 
                      00421 IFDEF TEST
0002A6                00422 _set_n_max_fwd
0002A6 EC?? F0??      00423         call f_calc_set_n_max_fwd
0002AA 0E03           00424         movlw N_MAX-1
0002AC 6E??           00425         movwf v_tmp
0002AE 0012           00426         return
                      00427 
0002B0                00428 _set_n_min_fwd
0002B0 EC?? F0??      00429         call f_calc_set_n_min_fwd
0002B4 0E01           00430         movlw N_MIN+1
0002B6 6E??           00431         movwf v_tmp
0002B8 0012           00432         return
                      00433 
0002BA                00434 _set_n_max_ref
0002BA EC?? F0??      00435         call f_calc_set_n_max_ref
0002BE 0E03           00436         movlw N_MAX-1
0002C0 6E??           00437         movwf v_tmp
0002C2 0012           00438         return
                      00439 
0002C4                00440 _set_n_min_ref
0002C4 EC?? F0??      00441         call f_calc_set_n_min_ref
0002C8 0E01           00442         movlw N_MIN+1
0002CA 6E??           00443         movwf v_tmp
0002CC 0012           00444         return
                      00445 ENDIF
                      00446 
                      00447 IFDEF TEST
  0000                00448         global v_menu
                      00449 ENDIF
                      00450 
                      00451 
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 11


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

                      00452         end
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 12


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

A                                 CONSTANT      00000000              0
ABDEN                             CONSTANT      00000000              0
ACCESS                            CONSTANT      00000000              0
ACQT0                             CONSTANT      00000003              3
ACQT1                             CONSTANT      00000004              4
ACQT2                             CONSTANT      00000005              5
ADCON0                            CONSTANT      00000FC2           4034
ADCON1                            CONSTANT      00000FC1           4033
ADCON2                            CONSTANT      00000FC0           4032
ADCS0                             CONSTANT      00000000              0
ADCS1                             CONSTANT      00000001              1
ADCS2                             CONSTANT      00000002              2
ADDEN                             CONSTANT      00000003              3
ADEN                              CONSTANT      00000003              3
ADFM                              CONSTANT      00000007              7
ADIE                              CONSTANT      00000006              6
ADIF                              CONSTANT      00000006              6
ADIP                              CONSTANT      00000006              6
ADON                              CONSTANT      00000000              0
ADRES                             CONSTANT      00000FC3           4035
ADRESH                            CONSTANT      00000FC4           4036
ADRESL                            CONSTANT      00000FC3           4035
AN0                               CONSTANT      00000000              0
AN1                               CONSTANT      00000001              1
AN2                               CONSTANT      00000002              2
AN3                               CONSTANT      00000003              3
AN4                               CONSTANT      00000000              0
AN5                               CONSTANT      00000001              1
AN6                               CONSTANT      00000004              4
BANKED                            CONSTANT      00000001              1
BAUDCTL                           CONSTANT      00000FAA           4010
BIT_BANDE                         DEFINITION    00000004              4    4
BIT_BP_STATUS_TIMEOUT             DEFINITION    00000000              0    0
BIT_CALIBRATION_M                 DEFINITION    00000003              3    3
BIT_CALIBRATION_P                 DEFINITION    00000002              2    2
BOR                               CONSTANT      00000000              0
BP_BANDE                          DEFINITION                               BP_PORT,4
BP_CALIBRATION_M                  DEFINITION                               BP_PORT,BIT_CALIBRATION_M
BP_CALIBRATION_P                  DEFINITION                               BP_PORT,BIT_CALIBRATION_P
BP_PORT                           DEFINITION                               PORTA
BRG16                             CONSTANT      00000003              3
BRGH                              CONSTANT      00000002              2
BSR                               CONSTANT      00000FE0           4064
C                                 CONSTANT      00000000              0
CCP1                              CONSTANT      00000003              3
CCP1CON                           CONSTANT      00000FBD           4029
CCP1IE                            CONSTANT      00000002              2
CCP1IF                            CONSTANT      00000002              2
CCP1IP                            CONSTANT      00000002              2
CCP1M0                            CONSTANT      00000000              0
CCP1M1                            CONSTANT      00000001              1
CCP1M2                            CONSTANT      00000002              2
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 13


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

CCP1M3                            CONSTANT      00000003              3
CCP1X                             CONSTANT      00000005              5
CCP1Y                             CONSTANT      00000004              4
CCPR1                             CONSTANT      00000FBE           4030
CCPR1H                            CONSTANT      00000FBF           4031
CCPR1L                            CONSTANT      00000FBE           4030
CFGS                              CONSTANT      00000006              6
CHS0                              CONSTANT      00000002              2
CHS1                              CONSTANT      00000003              3
CHS2                              CONSTANT      00000004              4
CK                                CONSTANT      00000001              1
CLKI                              CONSTANT      00000007              7
CLKIN                             CONSTANT      00000007              7
CLKO                              CONSTANT      00000006              6
CLKOUT                            CONSTANT      00000006              6
CREN                              CONSTANT      00000004              4
CSRC                              CONSTANT      00000007              7
D160us                            EXTERNAL      00000000              0
DC                                CONSTANT      00000001              1
DC1B0                             CONSTANT      00000004              4
DC1B1                             CONSTANT      00000005              5
DDRA                              DEFINITION                               TRISA
DDRB                              DEFINITION                               TRISB
DDRC                              DEFINITION                               TRISC
DDRD                              DEFINITION                               TRISD
DDRE                              DEFINITION                               TRISE
DONE                              CONSTANT      00000001              1
Del_11us                          EXTERNAL      00000000              0
ECCPAS                            CONSTANT      00000FB6           4022
ECCPAS0                           CONSTANT      00000004              4
ECCPAS1                           CONSTANT      00000005              5
ECCPAS2                           CONSTANT      00000006              6
ECCPASE                           CONSTANT      00000007              7
EEADR                             CONSTANT      00000FA9           4009
EECON1                            CONSTANT      00000FA6           4006
EECON2                            CONSTANT      00000FA7           4007
EEDATA                            CONSTANT      00000FA8           4008
EEIE                              CONSTANT      00000004              4
EEIF                              CONSTANT      00000004              4
EEIP                              CONSTANT      00000004              4
EEPGD                             CONSTANT      00000007              7
FAST                              CONSTANT      00000001              1
FERR                              CONSTANT      00000002              2
FLTS                              CONSTANT      00000002              2
FREE                              CONSTANT      00000004              4
FSR0                              CONSTANT      00000000              0
FSR0H                             CONSTANT      00000FEA           4074
FSR0L                             CONSTANT      00000FE9           4073
FSR1                              CONSTANT      00000001              1
FSR1H                             CONSTANT      00000FE2           4066
FSR1L                             CONSTANT      00000FE1           4065
FSR2                              CONSTANT      00000002              2
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 14


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

FSR2H                             CONSTANT      00000FDA           4058
FSR2L                             CONSTANT      00000FD9           4057
GIE                               CONSTANT      00000007              7
GIEH                              CONSTANT      00000007              7
GIEL                              CONSTANT      00000006              6
GIE_GIEH                          CONSTANT      00000007              7
GO                                CONSTANT      00000001              1
GO_DONE                           CONSTANT      00000001              1
GO_NOT_DONE                       CONSTANT      00000001              1
IDLEN                             CONSTANT      00000007              7
INDF0                             CONSTANT      00000FEF           4079
INDF1                             CONSTANT      00000FE7           4071
INDF2                             CONSTANT      00000FDF           4063
INT0                              CONSTANT      00000000              0
INT0E                             CONSTANT      00000004              4
INT0F                             CONSTANT      00000001              1
INT0IE                            CONSTANT      00000004              4
INT0IF                            CONSTANT      00000001              1
INT1                              CONSTANT      00000001              1
INT1E                             CONSTANT      00000003              3
INT1F                             CONSTANT      00000000              0
INT1IE                            CONSTANT      00000003              3
INT1IF                            CONSTANT      00000000              0
INT1IP                            CONSTANT      00000006              6
INT1P                             CONSTANT      00000006              6
INT2                              CONSTANT      00000002              2
INT2E                             CONSTANT      00000004              4
INT2F                             CONSTANT      00000001              1
INT2IE                            CONSTANT      00000004              4
INT2IF                            CONSTANT      00000001              1
INT2IP                            CONSTANT      00000007              7
INT2P                             CONSTANT      00000007              7
INTCON                            CONSTANT      00000FF2           4082
INTCON2                           CONSTANT      00000FF1           4081
INTCON3                           CONSTANT      00000FF0           4080
INTE                              CONSTANT      00000004              4
INTEDG0                           CONSTANT      00000006              6
INTEDG1                           CONSTANT      00000005              5
INTEDG2                           CONSTANT      00000004              4
INTF                              CONSTANT      00000001              1
IOFS                              CONSTANT      00000002              2
IPEN                              CONSTANT      00000007              7
IPR1                              CONSTANT      00000F9F           3999
IPR2                              CONSTANT      00000FA2           4002
IRCF0                             CONSTANT      00000004              4
IRCF1                             CONSTANT      00000005              5
IRCF2                             CONSTANT      00000006              6
IRVST                             CONSTANT      00000005              5
IVRST                             CONSTANT      00000005              5
Init                              ADDRESS       00000004              4
KBI0                              CONSTANT      00000004              4
KBI1                              CONSTANT      00000005              5
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 15


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

KBI2                              CONSTANT      00000006              6
KBI3                              CONSTANT      00000007              7
LATA                              CONSTANT      00000F89           3977
LATA0                             CONSTANT      00000000              0
LATA1                             CONSTANT      00000001              1
LATA2                             CONSTANT      00000002              2
LATA3                             CONSTANT      00000003              3
LATA4                             CONSTANT      00000004              4
LATA6                             CONSTANT      00000006              6
LATA7                             CONSTANT      00000007              7
LATB                              CONSTANT      00000F8A           3978
LATB0                             CONSTANT      00000000              0
LATB1                             CONSTANT      00000001              1
LATB2                             CONSTANT      00000002              2
LATB3                             CONSTANT      00000003              3
LATB4                             CONSTANT      00000004              4
LATB5                             CONSTANT      00000005              5
LATB6                             CONSTANT      00000006              6
LATB7                             CONSTANT      00000007              7
LVDCON                            CONSTANT      00000FD2           4050
LVDEN                             CONSTANT      00000004              4
LVDIE                             CONSTANT      00000002              2
LVDIF                             CONSTANT      00000002              2
LVDIN                             CONSTANT      00000001              1
LVDIP                             CONSTANT      00000002              2
LVDL0                             CONSTANT      00000000              0
LVDL1                             CONSTANT      00000001              1
LVDL2                             CONSTANT      00000002              2
LVDL3                             CONSTANT      00000003              3
MCLR                              CONSTANT      00000005              5
N                                 CONSTANT      00000004              4
NB_BYTE                           DEFINITION    00000008              8    D'08'
NOT_BOR                           CONSTANT      00000000              0
NOT_DONE                          CONSTANT      00000001              1
NOT_MCLR                          CONSTANT      00000005              5
NOT_PD                            CONSTANT      00000002              2
NOT_POR                           CONSTANT      00000001              1
NOT_RBPU                          CONSTANT      00000007              7
NOT_RI                            CONSTANT      00000004              4
NOT_T1SYNC                        CONSTANT      00000002              2
NOT_T3SYNC                        CONSTANT      00000002              2
NOT_TO                            CONSTANT      00000003              3
N_MAX                             DEFINITION    00000004              4    D'4'
N_MIN                             DEFINITION    00000000              0    D'0'
OERR                              CONSTANT      00000001              1
OSC1                              CONSTANT      00000007              7
OSC2                              CONSTANT      00000006              6
OSCCON                            CONSTANT      00000FD3           4051
OSCFIE                            CONSTANT      00000007              7
OSCFIF                            CONSTANT      00000007              7
OSCFIP                            CONSTANT      00000007              7
OSCTUNE                           CONSTANT      00000F9B           3995
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 16


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

OSTS                              CONSTANT      00000003              3
OV                                CONSTANT      00000003              3
P1A                               CONSTANT      00000003              3
P1B                               CONSTANT      00000002              2
P1C                               CONSTANT      00000006              6
P1D                               CONSTANT      00000007              7
P1M0                              CONSTANT      00000006              6
P1M1                              CONSTANT      00000007              7
PAS_0_0625_LSB                    DEFINITION    00000071            113    0x71
PAS_0_0625_MSB                    DEFINITION    00000002              2    0x02
PAS_0_5_LSB                       DEFINITION    000000F4            244    0xF4
PAS_0_5_MSB                       DEFINITION    00000001              1    0x01
PAS_0_25_LSB                      DEFINITION    000000FA            250    0xFA
PAS_0_25_MSB                      DEFINITION    00000000              0    0x00
PAS_0_125_LSB                     DEFINITION    0000007D            125    0x7D
PAS_0_125_MSB                     DEFINITION    00000000              0    0x00
PAS_0_LSB                         DEFINITION    00000000              0    0x00
PAS_0_MSB                         DEFINITION    00000000              0    0x00
PC                                CONSTANT      00000FF9           4089
PCFG0                             CONSTANT      00000000              0
PCFG1                             CONSTANT      00000001              1
PCFG2                             CONSTANT      00000002              2
PCFG3                             CONSTANT      00000003              3
PCFG4                             CONSTANT      00000004              4
PCFG5                             CONSTANT      00000005              5
PCFG6                             CONSTANT      00000006              6
PCL                               CONSTANT      00000FF9           4089
PCLATH                            CONSTANT      00000FFA           4090
PCLATU                            CONSTANT      00000FFB           4091
PD                                CONSTANT      00000002              2
PDC0                              CONSTANT      00000000              0
PDC1                              CONSTANT      00000001              1
PDC2                              CONSTANT      00000002              2
PDC3                              CONSTANT      00000003              3
PDC4                              CONSTANT      00000004              4
PDC5                              CONSTANT      00000005              5
PDC6                              CONSTANT      00000006              6
PEIE                              CONSTANT      00000006              6
PEIE_GIEL                         CONSTANT      00000006              6
PGC                               CONSTANT      00000006              6
PGD                               CONSTANT      00000007              7
PGM                               CONSTANT      00000005              5
PIE1                              CONSTANT      00000F9D           3997
PIE2                              CONSTANT      00000FA0           4000
PIR1                              CONSTANT      00000F9E           3998
PIR2                              CONSTANT      00000FA1           4001
PLUSW0                            CONSTANT      00000FEB           4075
PLUSW1                            CONSTANT      00000FE3           4067
PLUSW2                            CONSTANT      00000FDB           4059
POR                               CONSTANT      00000001              1
PORTA                             CONSTANT      00000F80           3968
PORTB                             CONSTANT      00000F81           3969
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 17


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

PORT_BIT                          DEFINITION    00000000              0    0
POSTDEC0                          CONSTANT      00000FED           4077
POSTDEC1                          CONSTANT      00000FE5           4069
POSTDEC2                          CONSTANT      00000FDD           4061
POSTINC0                          CONSTANT      00000FEE           4078
POSTINC1                          CONSTANT      00000FE6           4070
POSTINC2                          CONSTANT      00000FDE           4062
PR2                               CONSTANT      00000FCB           4043
PREINC0                           CONSTANT      00000FEC           4076
PREINC1                           CONSTANT      00000FE4           4068
PREINC2                           CONSTANT      00000FDC           4060
PROD                              CONSTANT      00000FF3           4083
PRODH                             CONSTANT      00000FF4           4084
PRODL                             CONSTANT      00000FF3           4083
PRSEN                             CONSTANT      00000007              7
PSA                               CONSTANT      00000003              3
PSSAC0                            CONSTANT      00000002              2
PSSAC1                            CONSTANT      00000003              3
PSSBD0                            CONSTANT      00000000              0
PSSBD1                            CONSTANT      00000001              1
PWM1CON                           CONSTANT      00000FB7           4023
RA0                               CONSTANT      00000000              0
RA1                               CONSTANT      00000001              1
RA2                               CONSTANT      00000002              2
RA3                               CONSTANT      00000003              3
RA4                               CONSTANT      00000004              4
RA5                               CONSTANT      00000005              5
RA6                               CONSTANT      00000006              6
RA7                               CONSTANT      00000007              7
RB0                               CONSTANT      00000000              0
RB1                               CONSTANT      00000001              1
RB2                               CONSTANT      00000002              2
RB3                               CONSTANT      00000003              3
RB4                               CONSTANT      00000004              4
RB5                               CONSTANT      00000005              5
RB6                               CONSTANT      00000006              6
RB7                               CONSTANT      00000007              7
RBIE                              CONSTANT      00000003              3
RBIF                              CONSTANT      00000000              0
RBIP                              CONSTANT      00000000              0
RBPU                              CONSTANT      00000007              7
RCIDL                             CONSTANT      00000006              6
RCIE                              CONSTANT      00000005              5
RCIF                              CONSTANT      00000005              5
RCIP                              CONSTANT      00000005              5
RCMT                              CONSTANT      00000006              6
RCON                              CONSTANT      00000FD0           4048
RCREG                             CONSTANT      00000FAE           4014
RCSTA                             CONSTANT      00000FAB           4011
RD                                CONSTANT      00000000              0
RD16                              CONSTANT      00000007              7
RI                                CONSTANT      00000004              4
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 18


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

RX                                CONSTANT      00000004              4
RX9                               CONSTANT      00000006              6
RX9D                              CONSTANT      00000000              0
SCKP                              CONSTANT      00000004              4
SCS                               CONSTANT      00000000              0
SCS0                              CONSTANT      00000000              0
SCS1                              CONSTANT      00000001              1
SENDB                             CONSTANT      00000003              3
SP0                               CONSTANT      00000000              0
SP1                               CONSTANT      00000001              1
SP2                               CONSTANT      00000002              2
SP3                               CONSTANT      00000003              3
SP4                               CONSTANT      00000004              4
SPBRG                             CONSTANT      00000FAF           4015
SPBRGH                            CONSTANT      00000FB0           4016
SPEN                              CONSTANT      00000007              7
SREN                              CONSTANT      00000005              5
STATUS                            CONSTANT      00000FD8           4056
STKFUL                            CONSTANT      00000007              7
STKOVF                            CONSTANT      00000007              7
STKPTR                            CONSTANT      00000FFC           4092
STKPTR0                           CONSTANT      00000000              0
STKPTR1                           CONSTANT      00000001              1
STKPTR2                           CONSTANT      00000002              2
STKPTR3                           CONSTANT      00000003              3
STKPTR4                           CONSTANT      00000004              4
STKUNF                            CONSTANT      00000006              6
SWDTE                             CONSTANT      00000000              0
SWDTEN                            CONSTANT      00000000              0
SYNC                              CONSTANT      00000004              4
T016BIT                           CONSTANT      00000006              6
T08BIT                            CONSTANT      00000006              6
T0CKI                             CONSTANT      00000004              4
T0CON                             CONSTANT      00000FD5           4053
T0CS                              CONSTANT      00000005              5
T0IE                              CONSTANT      00000005              5
T0IF                              CONSTANT      00000002              2
T0IP                              CONSTANT      00000002              2
T0PS0                             CONSTANT      00000000              0
T0PS1                             CONSTANT      00000001              1
T0PS2                             CONSTANT      00000002              2
T0SE                              CONSTANT      00000004              4
T1CKI                             CONSTANT      00000006              6
T1CKPS0                           CONSTANT      00000004              4
T1CKPS1                           CONSTANT      00000005              5
T1CON                             CONSTANT      00000FCD           4045
T1OSCEN                           CONSTANT      00000003              3
T1OSI                             CONSTANT      00000007              7
T1OSO                             CONSTANT      00000006              6
T1RUN                             CONSTANT      00000006              6
T1SYNC                            CONSTANT      00000002              2
T2CKPS0                           CONSTANT      00000000              0
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 19


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

T2CKPS1                           CONSTANT      00000001              1
T2CON                             CONSTANT      00000FCA           4042
T3CCP1                            CONSTANT      00000003              3
T3CCP2                            CONSTANT      00000006              6
T3CKPS0                           CONSTANT      00000004              4
T3CKPS1                           CONSTANT      00000005              5
T3CON                             CONSTANT      00000FB1           4017
T3SYNC                            CONSTANT      00000002              2
T13CKI                            CONSTANT      00000006              6
TABLAT                            CONSTANT      00000FF5           4085
TAG_FW_VERSION                    DEFINITION    00000010             16    0x10
TAG_PIC_REG                       DEFINITION    00000020             32    0x20
TAG_TIMER                         DEFINITION    00000040             64    0x40
TBLPTR                            CONSTANT      00000FF6           4086
TBLPTRH                           CONSTANT      00000FF7           4087
TBLPTRL                           CONSTANT      00000FF6           4086
TBLPTRU                           CONSTANT      00000FF8           4088
TIMER0_START                      DEFINITION                               (1<<TMR0ON) | (1<<T08BIT) | (1<<PSA)
TMR0                              CONSTANT      00000FD6           4054
TMR0H                             CONSTANT      00000FD7           4055
TMR0IE                            CONSTANT      00000005              5
TMR0IF                            CONSTANT      00000002              2
TMR0IP                            CONSTANT      00000002              2
TMR0L                             CONSTANT      00000FD6           4054
TMR0ON                            CONSTANT      00000007              7
TMR1                              CONSTANT      00000FCE           4046
TMR1CS                            CONSTANT      00000001              1
TMR1H                             CONSTANT      00000FCF           4047
TMR1IE                            CONSTANT      00000000              0
TMR1IF                            CONSTANT      00000000              0
TMR1IP                            CONSTANT      00000000              0
TMR1L                             CONSTANT      00000FCE           4046
TMR1ON                            CONSTANT      00000000              0
TMR2                              CONSTANT      00000FCC           4044
TMR2IE                            CONSTANT      00000001              1
TMR2IF                            CONSTANT      00000001              1
TMR2IP                            CONSTANT      00000001              1
TMR2ON                            CONSTANT      00000002              2
TMR3                              CONSTANT      00000FB2           4018
TMR3CS                            CONSTANT      00000001              1
TMR3H                             CONSTANT      00000FB3           4019
TMR3IE                            CONSTANT      00000001              1
TMR3IF                            CONSTANT      00000001              1
TMR3IP                            CONSTANT      00000001              1
TMR3L                             CONSTANT      00000FB2           4018
TMR3ON                            CONSTANT      00000000              0
TO                                CONSTANT      00000003              3
TOS                               CONSTANT      00000FFD           4093
TOSH                              CONSTANT      00000FFE           4094
TOSL                              CONSTANT      00000FFD           4093
TOSU                              CONSTANT      00000FFF           4095
TOUTPS0                           CONSTANT      00000003              3
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 20


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

TOUTPS1                           CONSTANT      00000004              4
TOUTPS2                           CONSTANT      00000005              5
TOUTPS3                           CONSTANT      00000006              6
TRISA                             CONSTANT      00000F92           3986
TRISA0                            CONSTANT      00000000              0
TRISA1                            CONSTANT      00000001              1
TRISA2                            CONSTANT      00000002              2
TRISA3                            CONSTANT      00000003              3
TRISA4                            CONSTANT      00000004              4
TRISA6                            CONSTANT      00000006              6
TRISA7                            CONSTANT      00000007              7
TRISB                             CONSTANT      00000F93           3987
TRISB0                            CONSTANT      00000000              0
TRISB1                            CONSTANT      00000001              1
TRISB2                            CONSTANT      00000002              2
TRISB3                            CONSTANT      00000003              3
TRISB4                            CONSTANT      00000004              4
TRISB5                            CONSTANT      00000005              5
TRISB6                            CONSTANT      00000006              6
TRISB7                            CONSTANT      00000007              7
TRMT                              CONSTANT      00000001              1
TUN0                              CONSTANT      00000000              0
TUN1                              CONSTANT      00000001              1
TUN2                              CONSTANT      00000002              2
TUN3                              CONSTANT      00000003              3
TUN4                              CONSTANT      00000004              4
TUN5                              CONSTANT      00000005              5
TX                                CONSTANT      00000001              1
TX9                               CONSTANT      00000006              6
TX9D                              CONSTANT      00000000              0
TXEN                              CONSTANT      00000005              5
TXIE                              CONSTANT      00000004              4
TXIF                              CONSTANT      00000004              4
TXIP                              CONSTANT      00000004              4
TXREG                             CONSTANT      00000FAD           4013
TXSTA                             CONSTANT      00000FAC           4012
VCFG0                             CONSTANT      00000006              6
VCFG1                             CONSTANT      00000007              7
VREFM                             CONSTANT      00000002              2
VREFP                             CONSTANT      00000003              3
W                                 CONSTANT      00000000              0
WDTCON                            CONSTANT      00000FD1           4049
WR                                CONSTANT      00000001              1
WREG                              CONSTANT      00000FE8           4072
WREN                              CONSTANT      00000002              2
WRERR                             CONSTANT      00000003              3
WUE                               CONSTANT      00000001              1
Z                                 CONSTANT      00000002              2
_BORV_27_2L                       CONSTANT      000000FB            251
_BORV_42_2L                       CONSTANT      000000F7            247
_BORV_45_2L                       CONSTANT      000000F3            243
_BOR_OFF_2L                       CONSTANT      000000FD            253
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 21


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

_BOR_ON_2L                        CONSTANT      000000FF            255
_CONFIG1H                         CONSTANT      00300001        3145729
_CONFIG2H                         CONSTANT      00300003        3145731
_CONFIG2L                         CONSTANT      00300002        3145730
_CONFIG3H                         CONSTANT      00300005        3145733
_CONFIG4L                         CONSTANT      00300006        3145734
_CONFIG5H                         CONSTANT      00300009        3145737
_CONFIG5L                         CONSTANT      00300008        3145736
_CONFIG6H                         CONSTANT      0030000B        3145739
_CONFIG6L                         CONSTANT      0030000A        3145738
_CONFIG7H                         CONSTANT      0030000D        3145741
_CONFIG7L                         CONSTANT      0030000C        3145740
_CP0_OFF_5L                       CONSTANT      000000FF            255
_CP0_ON_5L                        CONSTANT      000000FE            254
_CP1_OFF_5L                       CONSTANT      000000FF            255
_CP1_ON_5L                        CONSTANT      000000FD            253
_CPB_OFF_5H                       CONSTANT      000000FF            255
_CPB_ON_5H                        CONSTANT      000000BF            191
_CPD_OFF_5H                       CONSTANT      000000FF            255
_CPD_ON_5H                        CONSTANT      0000007F            127
_DEBUG_OFF_4L                     CONSTANT      000000FF            255
_DEBUG_ON_4L                      CONSTANT      0000007F            127
_DEVID1                           CONSTANT      003FFFFE        4194302
_DEVID2                           CONSTANT      003FFFFF        4194303
_EBTR0_OFF_7L                     CONSTANT      000000FF            255
_EBTR0_ON_7L                      CONSTANT      000000FE            254
_EBTR1_OFF_7L                     CONSTANT      000000FF            255
_EBTR1_ON_7L                      CONSTANT      000000FD            253
_EBTRB_OFF_7H                     CONSTANT      000000FF            255
_EBTRB_ON_7H                      CONSTANT      000000BF            191
_ECIOP_OSC_1H                     CONSTANT      000000F5            245
_EC_OSC_1H                        CONSTANT      000000F4            244
_FSCM_OFF_1H                      CONSTANT      000000BF            191
_FSCM_ON_1H                       CONSTANT      000000FF            255
_HSPLL_OSC_1H                     CONSTANT      000000F6            246
_HS_OSC_1H                        CONSTANT      000000F2            242
_IDLOC0                           CONSTANT      00200000        2097152
_IDLOC1                           CONSTANT      00200001        2097153
_IDLOC2                           CONSTANT      00200002        2097154
_IDLOC3                           CONSTANT      00200003        2097155
_IDLOC4                           CONSTANT      00200004        2097156
_IDLOC5                           CONSTANT      00200005        2097157
_IDLOC6                           CONSTANT      00200006        2097158
_IDLOC7                           CONSTANT      00200007        2097159
_IESO_OFF_1H                      CONSTANT      0000007F            127
_IESO_ON_1H                       CONSTANT      000000FF            255
_INTIO1_OSC_1H                    CONSTANT      000000F9            249
_INTIO2_OSC_1H                    CONSTANT      000000F8            248
_LP_OSC_1H                        CONSTANT      000000F0            240
_LVP_OFF_4L                       CONSTANT      000000FB            251
_LVP_ON_4L                        CONSTANT      000000FF            255
_MCLRE_OFF_3H                     CONSTANT      0000007F            127
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 22


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

_MCLRE_ON_3H                      CONSTANT      000000FF            255
_PWRT_OFF_2L                      CONSTANT      000000FF            255
_PWRT_ON_2L                       CONSTANT      000000FE            254
_RCIO_OSC_1H                      CONSTANT      000000F7            247
_RC_OSC_1H                        CONSTANT      000000FC            252
_STVR_OFF_4L                      CONSTANT      000000FE            254
_STVR_ON_4L                       CONSTANT      000000FF            255
_WDTPS_1K_2H                      CONSTANT      000000F5            245
_WDTPS_1_2H                       CONSTANT      000000E1            225
_WDTPS_2K_2H                      CONSTANT      000000F7            247
_WDTPS_2_2H                       CONSTANT      000000E3            227
_WDTPS_4K_2H                      CONSTANT      000000F9            249
_WDTPS_4_2H                       CONSTANT      000000E5            229
_WDTPS_8K_2H                      CONSTANT      000000FB            251
_WDTPS_8_2H                       CONSTANT      000000E7            231
_WDTPS_16K_2H                     CONSTANT      000000FD            253
_WDTPS_16_2H                      CONSTANT      000000E9            233
_WDTPS_32K_2H                     CONSTANT      000000FF            255
_WDTPS_32_2H                      CONSTANT      000000EB            235
_WDTPS_64_2H                      CONSTANT      000000ED            237
_WDTPS_128_2H                     CONSTANT      000000EF            239
_WDTPS_256_2H                     CONSTANT      000000F1            241
_WDTPS_512_2H                     CONSTANT      000000F3            243
_WDT_OFF_2H                       CONSTANT      000000FE            254
_WDT_ON_2H                        CONSTANT      000000FF            255
_WRT0_OFF_6L                      CONSTANT      000000FF            255
_WRT0_ON_6L                       CONSTANT      000000FE            254
_WRT1_OFF_6L                      CONSTANT      000000FF            255
_WRT1_ON_6L                       CONSTANT      000000FD            253
_WRTB_OFF_6H                      CONSTANT      000000FF            255
_WRTB_ON_6H                       CONSTANT      000000BF            191
_WRTC_OFF_6H                      CONSTANT      000000FF            255
_WRTC_ON_6H                       CONSTANT      000000DF            223
_WRTD_OFF_6H                      CONSTANT      000000FF            255
_WRTD_ON_6H                       CONSTANT      0000007F            127
_XT_OSC_1H                        CONSTANT      000000F1            241
__16_BIT                          CONSTANT      00000001              1
__18F1320                         CONSTANT      00000001              1
__ACC_RAM_LOW_END                 CONSTANT      0000007F            127
__ACC_RAM_LOW_START               CONSTANT      00000000              0
__ACTIVE_BANK_ADDR                VARIABLE      FFFFFFFF             -1
__ASSUMED_BANK_ADDR               VARIABLE      FFFFFFFF             -1
__BANK_0                          CONSTANT      00000000              0
__BANK_1                          CONSTANT      00000100            256
__BANK_2                          CONSTANT      00000200            512
__BANK_3                          CONSTANT      00000300            768
__BANK_4                          CONSTANT      00000400           1024
__BANK_5                          CONSTANT      00000500           1280
__BANK_6                          CONSTANT      00000600           1536
__BANK_7                          CONSTANT      00000700           1792
__BANK_8                          CONSTANT      00000800           2048
__BANK_9                          CONSTANT      00000900           2304
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 23


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

__BANK_10                         CONSTANT      00000A00           2560
__BANK_11                         CONSTANT      00000B00           2816
__BANK_12                         CONSTANT      00000C00           3072
__BANK_13                         CONSTANT      00000D00           3328
__BANK_14                         CONSTANT      00000E00           3584
__BANK_15                         CONSTANT      00000F00           3840
__BANK_BITS                       CONSTANT      00000F00           3840
__BANK_FIRST                      CONSTANT      00000000              0
__BANK_INV                        CONSTANT      FFFFFFFF             -1
__BANK_LAST                       CONSTANT      00000F00           3840
__BANK_MASK                       CONSTANT      000000FF            255
__BANK_SHIFT                      CONSTANT      00000008              8
__BANK_SIZE                       CONSTANT      00000100            256
__CODE_END                        CONSTANT      00001FFF           8191
__CODE_START                      CONSTANT      00000000              0
__COMMON_RAM_END                  CONSTANT      0000007F            127
__COMMON_RAM_START                CONSTANT      00000000              0
__CONFIG_END                      CONSTANT      0030000D        3145741
__CONFIG_START                    CONSTANT      00300000        3145728
__EEPROM_END                      CONSTANT      00F000FF       15728895
__EEPROM_START                    CONSTANT      00F00000       15728640
__EXTENDED                        CONSTANT      00000001              1
__GPUTILS_SVN_VERSION             CONSTANT      00000505           1285
__GPUTILS_VERSION_MAJOR           CONSTANT      00000001              1
__GPUTILS_VERSION_MICRO           CONSTANT      00000000              0
__GPUTILS_VERSION_MINOR           CONSTANT      00000005              5
__IDLOCS_END                      CONSTANT      00200007        2097159
__IDLOCS_START                    CONSTANT      00200000        2097152
__NUM_BANKS                       CONSTANT      00000010             16
__VECTOR_INT_HIGH                 CONSTANT      00000008              8
__VECTOR_INT_LOW                  CONSTANT      00000018             24
__VECTOR_RESET                    CONSTANT      00000000              0
__WHILE_LOOP_COUNT_MAX            CONSTANT      000000FF            255
_check_n_fwd_change               ADDRESS       000001F4            500
_check_n_fwd_max                  ADDRESS       000001E8            488
_check_n_fwd_min                  ADDRESS       000001DC            476
_check_n_ref_change               ADDRESS       000001C8            456
_check_n_ref_max                  ADDRESS       000001BC            444
_check_n_ref_min                  ADDRESS       000001B0            432
_check_rdac_fwd_change            ADDRESS       00000238            568
_check_rdac_ref_change            ADDRESS       00000224            548
_menu_cal_end                     ADDRESS       00000240            576
_menu_cal_end2                    ADDRESS       0000024E            590
_menu_cal_end3                    ADDRESS       00000252            594
_menu_cal_toggle_fwd_port         ADDRESS       00000194            404
_menu_cal_toggle_n_fwd            ADDRESS       000001D4            468
_menu_cal_toggle_n_value          ADDRESS       000001A2            418
_menu_cal_toggle_port             ADDRESS       00000160            352
_menu_cal_toggle_rdac             ADDRESS       00000200            512
_menu_cal_toggle_rdac2            ADDRESS       00000212            530
_menu_cal_toggle_rdac3            ADDRESS       00000216            534
_menu_cal_toggle_rdac_fwd         ADDRESS       00000230            560
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 24


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

_set_n_max_fwd                    ADDRESS       000002A6            678
_set_n_max_ref                    ADDRESS       000002BA            698
_set_n_min_fwd                    ADDRESS       000002B0            688
_set_n_min_ref                    ADDRESS       000002C4            708
choix_menu                        ADDRESS       0000010C            268
delay_250ms                       EXTERNAL      00000000              0
f_adc_init                        EXTERNAL      00000000              0
f_adc_read_fwd                    EXTERNAL      00000000              0
f_adc_read_ref                    EXTERNAL      00000000              0
f_aop_get_rdac_fwd                EXTERNAL      00000000              0
f_aop_get_rdac_ref                EXTERNAL      00000000              0
f_aop_set_rdac_eep_fwd            EXTERNAL      00000000              0
f_aop_set_rdac_eep_ref            EXTERNAL      00000000              0
f_aop_set_rdac_fwd                EXTERNAL      00000000              0
f_aop_set_rdac_ref                EXTERNAL      00000000              0
f_bp_init                         EXTERNAL      00000000              0
f_bp_test_bande                   EXTERNAL      00000000              0
f_bp_test_calm                    EXTERNAL      00000000              0
f_bp_test_calp                    EXTERNAL      00000000              0
f_calc_get_eep_value              EXTERNAL      00000000              0
f_calc_init                       EXTERNAL      00000000              0
f_calc_partie_decimale            EXTERNAL      00000000              0
f_calc_partie_entiere             EXTERNAL      00000000              0
f_calc_set_n_max_fwd              EXTERNAL      00000000              0
f_calc_set_n_max_ref              EXTERNAL      00000000              0
f_calc_set_n_min_fwd              EXTERNAL      00000000              0
f_calc_set_n_min_ref              EXTERNAL      00000000              0
f_calc_vadc_fwd_and_ref           EXTERNAL      00000000              0
f_eep_readbyte                    EXTERNAL      00000000              0
f_i2c_init                        EXTERNAL      00000000              0
f_lcd_aff_G_and_rdac              EXTERNAL      00000000              0
f_lcd_aff_adc_hexa                EXTERNAL      00000000              0
f_lcd_aff_adc_mV                  EXTERNAL      00000000              0
f_lcd_aff_fwd_and_ref             EXTERNAL      00000000              0
f_lcd_aff_n                       EXTERNAL      00000000              0
f_lcd_aff_rdac                    EXTERNAL      00000000              0
f_lcd_affboot                     EXTERNAL      00000000              0
f_lcd_calibrated_voltage          EXTERNAL      00000000              0
f_lcd_clear                       EXTERNAL      00000000              0
f_lcd_init                        EXTERNAL      00000000              0
f_lcd_setposcursor                EXTERNAL      00000000              0
f_lcd_toggle_fwd_port             EXTERNAL      00000000              0
f_lcd_toggle_n_fwd                EXTERNAL      00000000              0
f_lcd_toggle_n_ref                EXTERNAL      00000000              0
f_lcd_toggle_rdac_fwd             EXTERNAL      00000000              0
f_lcd_toggle_rdac_ref             EXTERNAL      00000000              0
f_lcd_toggle_ref_port             EXTERNAL      00000000              0
f_log_write                       EXTERNAL      00000000              0
f_tempo_boot                      ADDRESS       00000284            644
m_timer0_start                    MACRO     
m_timer0_stop                     MACRO     
menu_calcul                       ADDRESS       0000025C            604
gpasm-1.5.0 #1285 (Sep 12 2016)      main.asm   6-9-2020  14:13:12          PAGE 25


SYMBOL TABLE
  LABEL                              TYPE        VALUE         VALUE          VALUE
                                                 (hex)         (dec)          (text)

menu_calibration                  ADDRESS       0000015C            348
menu_mesure                       ADDRESS       00000136            310
test_loop                         ADDRESS       000000FA            250
v_aop_rdac                        EXTERNAL      00000000              0
v_bp_status                       EXTERNAL      00000000              0
v_calc_n_fwd                      EXTERNAL      00000000              0
v_calc_n_ref                      EXTERNAL      00000000              0
v_calc_port                       EXTERNAL      00000000              0
v_log_data                        EXTERNAL      00000000              0
v_log_data_size                   EXTERNAL      00000000              0
v_log_tag                         EXTERNAL      00000000              0
v_menu                            GLOBAL        00000000              0
v_test                            STATIC        00000003              3
v_tmp                             STATIC        00000001              1

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

